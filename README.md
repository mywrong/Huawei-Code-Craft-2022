# Huawei-Code-Craft-2022
2022年华为软件精英挑战赛江山赛区初赛第3，复赛16

关于初赛：

训练赛时一直处于前五的状态，有些掉以轻心，初赛开始时把训练赛的代码一提交，直接排到30名开外了。后来捡起并实现了训练赛时思考的一个未去实现的思路，排名成功提升到第三名。

核心思路是在得到初解后实现一个使成本不会变劣的流量重分配算法：遍历所有边缘节点在所有时刻的分配，若某时刻流量超过该边缘节点的95分位流量，则尽可能向其他兄弟节点分配流量（可分配流量为兄弟节点95分位值-兄弟节点当前已分配流量）。

由于使用得python，运行效率较低，线上会超时，所以用了线程池来并行计算。后面发现pypi的运行效率大概是Python的十倍，就用了pypi来提交，从原先的超时（大于300秒），优化到了40秒。

关于复赛：

复赛赛题在初赛的基础上做了一些改动，成为了一个多重背包问题，但是由于数据量巨大，按正常的背包问题解法是不可能完成计算的。由于忙于修改论文，相比初赛每天卷排行，复赛最后几天才开卷。

首先将初赛代码用c++重写来应对题目变动带来的更高时间复杂度，然后改写重分配算法，使之适应01背包的流量分配。发现时间复杂度还是太高，线上超时，于是使用了多线程来降低计算时间。此时的流量总成本在350万左右，排30名。

在对分配方案做可视化分析后，尝试排序边缘节点的分配顺序，将成本降低到了170万左右，排名提升到20名。

后续又做了若干次尝试，如设置了一个super site，将流量尽可能分配到super site，来降低其他节点的成本，有些效果，成本降低到了140万左右，排名提升到十几名。

最后由于时间问题，没有更多好歹饿优化思路，复赛止步16名。

